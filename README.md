# coffee

## git

* refactor: 调整目录结构

## 解决方法 redis

* 将web server 和 redis 拆分为两个单独的服务
* 双方都是独立的，都是可扩展的 (例如都扩展成集群)
* (包括 mysq, 也是一个单独的服务，也可扩展)

## 为何 session 适合用 redis

* session 访问频繁，对性能要求极高
* session 可不考虑断电丢失数据的问题 (内存的硬伤)
* session 数据量不会太大（相比于 mysql 中存储的数据）

## 为何网站数据不适合用 redis

* 操作频率不是太高 （相比于 session 操作）
* 断电不能丢失，必须保留
* 数据量太大，内存成本太高

## jwt 是什么

* jwt - json web token
* 用户认证成功之后，server 端返回一个加密的 toekn 给客户端
* 客户端后续每次请求都带 token , 以示当前的用户身份

## jwt vs session

* 为了解决：登录 & 存储登录用户的信息
* jwt 用户信息加密存储在客户端，不依赖 cookie，可跨域
* session 用户信息存储在服务端，依赖 cookie, 默认不可跨域
* 一般情况下，两者都能满足。大型系统中两者可共用
* jwt 更适合于服务节点较多，跨域比较多的系统
* session 更适合于同一的 web 服务，server 要严格管理用户信息

## 技术方案设计

* 构架设计
* 页面 ( 模板，路由) 和 API 设计
* 数据模型设计
* @ 功能如何实现
* 图片上传如何实现

## 页面和 API

* 原型图演示
* 页面汇总（模型，路由，组件）
* API 汇总

## 关系型数据库 三大范式

* 属性的原子性：每一列都不可再拆解
* 记录的唯一性：有唯一标识（主键），其他属性都依赖于主键
* 字段的冗余性：不存在数据冗余和传递依赖
* 数据规范严谨，不易出错
* 占用空间更小
* 访问速度更快

## 功能列表

* 用户管理（登录和注册）
* 用户设置（修改基本信息，修改密码，退出登录）
* 创建微博，暂不显示微博列表
* 个人主页，显示个人微博列表和个人信息，暂不做关注功能
* 广场页（使用缓存）
* 关注和取消关注，显示粉丝和关注人
* 首页
* @ 和回复
* @ 提到我的

### 用户管理

* 页面：模板和路由
* 数据建模
* 开发注册功能
* 开发登录功能
* 抽离 loginCheck 中间件
* 单元测试
